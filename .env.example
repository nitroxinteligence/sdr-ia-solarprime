# ==================================================
# SDR IA SolarPrime - Configurações
# ==================================================
# Copie este arquivo para .env e preencha os valores
# ==================================================

# Ambiente
ENVIRONMENT=development
DEBUG=true

# API Configuration
API_BASE_URL=http://localhost:8000
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000
ALLOWED_HOSTS=localhost,127.0.0.1

# Gemini AI Configuration
GEMINI_API_KEY=your_gemini_api_key_here

# Evolution API (WhatsApp)
EVOLUTION_API_URL=http://localhost:8080
EVOLUTION_API_KEY=your_evolution_api_key_here
EVOLUTION_INSTANCE_NAME=solarprime
EVOLUTION_INSTANCE_TOKEN=your_instance_token_here

# Webhook Security
WEBHOOK_SECRET=your_webhook_secret_here

# Business Logic
AI_RESPONSE_DELAY_SECONDS=2
TYPING_SIMULATION_ENABLED=true
MAX_MESSAGE_LENGTH=4096

# Message Chunking Configuration
MESSAGE_CHUNKING_ENABLED=true          # Habilitar divisão de mensagens
CHUNK_JOIN_PROBABILITY=0.6             # Probabilidade de juntar sentenças (0.0-1.0)
CHUNK_MAX_WORDS=30                     # Máximo de palavras por chunk
CHUNK_MIN_WORDS=3                      # Mínimo de palavras por chunk
CHUNK_MAX_CHARS=1200                   # Máximo de caracteres por chunk (WhatsApp: 1600)
CHUNK_TYPING_WORDS_PER_MINUTE=150      # Velocidade de digitação simulada
CHUNK_READING_WORDS_PER_MINUTE=200     # Velocidade de leitura estimada

# OpenAI Fallback Configuration
OPENAI_API_KEY=YOUR_OPENAI_API_KEY_HERE
OPENAI_MODEL=gpt-4.1-nano              # Modelo nano mais rápido e econômico da OpenAI
ENABLE_FALLBACK=true                   # Habilitar fallback para OpenAI
MAX_AI_RETRIES=3                       # Número máximo de tentativas
RETRY_DELAY_SECONDS=2                  # Delay inicial entre tentativas
RESPONSE_CACHE_TTL_MINUTES=60          # TTL do cache de respostas

# Kommo CRM (será configurado posteriormente)
KOMMO_CLIENT_ID=
KOMMO_CLIENT_SECRET=
KOMMO_SUBDOMAIN=

# Supabase (será configurado posteriormente)
SUPABASE_URL=
SUPABASE_KEY=
SUPABASE_SERVICE_KEY=

# Database Pool Configuration
DB_POOL_MIN_SIZE=10              # Minimum connections in pool
DB_POOL_MAX_SIZE=50              # Maximum connections in pool
DB_POOL_MAX_QUERIES=50000        # Max queries per connection
DB_POOL_MAX_INACTIVE_LIFETIME=300 # Seconds before closing idle connections
DB_COMMAND_TIMEOUT=10             # Command timeout in seconds

# Redis/Celery (será configurado posteriormente)
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# Rate Limiting
RATE_LIMIT_DEFAULT=60              # Requisições por minuto (padrão)
RATE_LIMIT_WINDOW=60              # Janela em segundos
RATE_LIMIT_BURST=10               # Limite de burst
RATE_LIMIT_BURST_WINDOW=10        # Janela de burst em segundos
RATE_LIMIT_WEBHOOK=300            # Limite para webhook
RATE_LIMIT_SEND_MESSAGE=30        # Limite para envio de mensagens
RATE_LIMIT_API=120                # Limite geral da API
RATE_LIMIT_AUTO_BLOCK_THRESHOLD=5 # Violações para bloquear IP
RATE_LIMIT_AUTO_BLOCK_DURATION=3600 # Duração do bloqueio em segundos
RATE_LIMIT_WHITELIST_IPS=         # IPs permitidos (separados por vírgula)

# Reporting
WHATSAPP_GROUP_ID=
REPORT_DAY_OF_WEEK=1  # Segunda-feira
REPORT_TIME=09:00

# Logging
LOG_LEVEL=INFO

# Follow-up Configuration
ENABLE_FOLLOW_UP=true              # Habilitar sistema de follow-up
FOLLOW_UP_DELAY_MINUTES=30         # Primeiro follow-up após 30 minutos
FOLLOW_UP_SECOND_DELAY_HOURS=24    # Segundo follow-up após 24 horas